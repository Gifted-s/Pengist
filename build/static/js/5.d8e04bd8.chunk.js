(window.webpackJsonpclient=window.webpackJsonpclient||[]).push([[5],{203:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(0),c=s(o),l=s(n(204)),i=s(n(207));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e){var t=/(?:\.([^.]+))?$/.exec(e);return null!=t&&null!=t[0]?t[0]:""}var d=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=Array(r),c=0;c<r;c++)o[c]=arguments[c];return n=a=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),a.uploadTasks=[],a.handleFileSelection=function(e){for(var t=e.target.files,n=0;n<t.length;n++)a.startUpload(t[n])},u(a,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),r(t,[{key:"componentWillUnmount",value:function(){this.cancelRunningUploads()}},{key:"cancelRunningUploads",value:function(){for(;this.uploadTasks.length>0;){var e=this.uploadTasks.pop();"running"===e.snapshot.state&&e.cancel()}}},{key:"removeTask",value:function(e){for(var t=0;t<this.uploadTasks.length;t++)if(this.uploadTasks[t]===e)return void this.uploadTasks.splice(t,1)}},{key:"startUpload",value:function(e){var t=this,n=this.props,a=n.onUploadStart,r=n.onProgress,o=n.onUploadError,c=n.onUploadSuccess,s=n.storageRef,u=n.metadata,d=n.randomizeFilename,m=n.filename,f=void 0;p(f=m?"function"===typeof m?m(e):m:d?(0,l.default)():e.name)||(f+=p(e.name)),Promise.resolve().then(function(){return e.type.match(/image.*/)&&(t.props.maxWidth||t.props.maxHeight)?(0,i.default)(e,t.props.maxWidth,t.props.maxHeight):e}).then(function(e){var n=s.child(f).put(e,u);a&&a(e,n),n.on("state_changed",function(e){return r&&r(Math.round(100*e.bytesTransferred/e.totalBytes),n)},function(e){return o&&o(e,n)},function(){return t.removeTask(n),c&&c(n.snapshot.metadata.name,n)}),t.uploadTasks.push(n)})}},{key:"render",value:function(){var e=this.props,t=(e.storageRef,e.onUploadStart,e.onProgress,e.onUploadSuccess,e.onUploadError,e.randomizeFilename,e.metadata,e.filename,e.maxWidth,e.maxHeight,e.hidden),n=e.as,r=void 0===n?"input":n,o=function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(e,["storageRef","onUploadStart","onProgress","onUploadSuccess","onUploadError","randomizeFilename","metadata","filename","maxWidth","maxHeight","hidden","as"]),l=t?Object.assign({},o.style,{width:"0.1px",height:"0.1px",opacity:0,overflow:"hidden",position:"absolute",zIndex:-1}):o.style;return c.default.createElement(r,a({type:"file",onChange:this.handleFileSelection},o,{style:l}))}}]),t}();t.default=d},204:function(e,t,n){var a=n(205),r=n(206);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var c=(e=e||{}).random||(e.rng||a)();if(c[6]=15&c[6]|64,c[8]=63&c[8]|128,t)for(var l=0;l<16;++l)t[o+l]=c[l];return t||r(c)}},205:function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var a=new Uint8Array(16);e.exports=function(){return n(a),a}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},206:function(e,t){for(var n=[],a=0;a<256;++a)n[a]=(a+256).toString(16).substr(1);e.exports=function(e,t){var a=t||0,r=n;return[r[e[a++]],r[e[a++]],r[e[a++]],r[e[a++]],"-",r[e[a++]],r[e[a++]],"-",r[e[a++]],r[e[a++]],"-",r[e[a++]],r[e[a++]],"-",r[e[a++]],r[e[a++]],r[e[a++]],r[e[a++]],r[e[a++]],r[e[a++]]].join("")}},207:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){HTMLCanvasElement.prototype.toBlob||(0,o.default)();return new Promise(function(a,r){var o=new FileReader;o.onload=function(o){var c=new Image;c.onload=function(o){var l=document.createElement("canvas"),i=t||c.width,s=n||c.height;l.width=i,l.height=s;var u=i/c.width,p=s/c.height,d=Math.max(u,p),m=d*c.width,f=d*c.height,h=Math.min((s-f)/2,0),b=Math.min((i-m)/2,0),g=l.getContext("2d");if(!g)return r("Could not get the context of the canvas element");g.drawImage(c,b,h,m,f),l.toBlob(function(e){a(e)},e.type)},c.src=o.target.result},o.readAsDataURL(e)})};var a,r=n(208),o=(a=r)&&a.__esModule?a:{default:a}},208:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){for(var a=atob(this.toDataURL(t,n).split(",")[1]),r=a.length,o=new Uint8Array(r),c=0;c<r;c++)o[c]=a.charCodeAt(c);e(new Blob([o],{type:t||"image/png"}))}})}},209:function(e,t,n){"use strict";function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],a=!0,r=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(a=(c=l.next()).done)&&(n.push(c.value),!t||n.length!==t);a=!0);}catch(i){r=!0,o=i}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.d(t,"a",function(){return a})},213:function(e,t,n){"use strict";n.r(t);var a=n(7),r=n(8),o=n(10),c=n(9),l=n(11),i=n(0),s=n.n(i),u=n(3);function p(){var e=new Date;this.getHour=function(){var t=e.getHours();return t>12?t-12:t},this.getMinute=function(){return e.getMinutes()},this.getSecond=function(){return e.getSeconds()},this.getDate=function(){return e.getUTCDate()},this.getMonth=function(){switch(e.getUTCMonth()){case 0:return"January";case 1:return"February";case 2:return"March";case 3:return"April";case 4:return"May";case 5:return"June";case 6:return"July";case 7:return"August";case 8:return"September";case 9:return"October";case 10:return"November";case 11:return"December";default:return null}},this.getDay=function(){switch(e.getUTCDay()){case 0:return"Sunday";case 1:return"Monday";case 2:return"Tuesday";case 3:return"Wednesday";case 4:return"Thursday";case 5:return"Friday";case 6:return"Saturday";default:return null}},this.getYear=function(){return e.getUTCFullYear()}}p.prototype.getFullDate=function(){return"".concat(this.getDay()," ").concat(this.getMonth()," ").concat(this.getDate(),", ").concat(this.getYear())},p.prototype.getFullTime=function(){var e=(new Date).getHours();return"".concat(this.getHour(),":").concat(this.getMinute()," ").concat(e>12?"PM":"AM")};new p;var d=n(4),m=n(1),f=n.n(m),h=n(6),b=n(209),g=n(96),y=n.n(g),v=n(5),E=n.n(v),w=n(203),O=n.n(w),j=n(48),x=n.n(j),S=function(e){var t,n=e.back,a=e.user,r=e.change,o=(e.reload,Object(i.useRef)(null)),c=Object(i.useState)(""),l=Object(b.a)(c,2),u=l[0],p=l[1],d=Object(i.useState)(!1),m=Object(b.a)(d,2),g=m[0],v=m[1],w=Object(i.useState)(0),j=Object(b.a)(w,2),S=j[0],k=j[1],C=Object(i.useState)(""),N=Object(b.a)(C,2),U=N[0],T=N[1],_=Object(i.useState)(""),M=Object(b.a)(_,2),P=(M[0],M[1]),R=Object(i.useState)(""),A=Object(b.a)(R,2),D=(A[0],A[1]),F=Object(i.useState)(""),I=Object(b.a)(F,2),H=I[0],W=I[1],B=Object(i.useState)(""),J=Object(b.a)(B,2),z=J[0],L=J[1],V=Object(i.useState)(""),Y=Object(b.a)(V,2),$=Y[0],q=Y[1],G=Object(i.useState)(!1),K=Object(b.a)(G,2),Q=K[0],X=K[1],Z=Object(i.useState)(0),ee=Object(b.a)(Z,2),te=ee[0],ne=ee[1],ae=Object(i.useState)(""),re=Object(b.a)(ae,2),oe=re[0],ce=re[1],le=Object(i.useState)("Short Stories"),ie=Object(b.a)(le,2),se=ie[0],ue=ie[1];function pe(){return(pe=Object(h.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(se){e.next=2;break}return e.abrupt("return",E()("Please enter category","","error"));case 2:if(z){e.next=4;break}return e.abrupt("return",E()("Oops","Enter title","error"));case 4:if(u){e.next=6;break}return e.abrupt("return",E()("Oops","Enter content please","error"));case 6:return e.next=8,fetch("https://userapipengist.herokuapp.com/increase-post/".concat(a._id),{method:"Post",headers:{"Content-type":"application/json"}}).then(function(e){return e.json()}).then(function(e){return e}).catch(function(e){return e.message});case 8:return e.next=10,fetch("https://apiarticlepengist.herokuapp.com/add-article",{method:"Post",headers:{"Content-type":"application/json"},body:JSON.stringify({title:z,pretext:$,category:se,content:u,articleId:H,episode:parseInt(te),authorId:a._id,authorName:a.name,imageUrl:oe})}).then(function(e){return e.json()}).then(function(e){return e}).catch(function(e){return e.message});case 10:if(!(t=e.sent).error){e.next=15;break}return e.abrupt("return",E()("",t.error,"error"));case 15:if("Failed to fetch"!==t){e.next=19;break}return e.abrupt("return",E()("","we could not access the server try again and ensure internet connection is on","error"));case 19:E()("Article posted","article id is ( ".concat(t.articleId," ). you can also see it in your articles collection"),"success").then(function(){return n()}).then(function(){window.location="/dashboard"});case 20:case"end":return e.stop()}},e)}))).apply(this,arguments)}return s.a.createElement("div",{className:"col-md-7 offset-md-2"},s.a.createElement("div",null,s.a.createElement("label",{className:"label_login"},"Enter the title of your post"),s.a.createElement("br",null),s.a.createElement("input",{onChange:function(e){return L(e.target.value)},type:"text",placeholder:"Enter title",className:"input-box"}),s.a.createElement("br",null),s.a.createElement("div",null,s.a.createElement("label",{className:"mt-3"},"(Optional) Add image file(Image will show here after upload):"),g&&s.a.createElement("div",null,s.a.createElement("p",{style:{fontWeight:"bolder"}},"Uploading image please wait: ",S,"%"),s.a.createElement("div",{className:"progress mt-2 mb-2",style:{height:20}},s.a.createElement("div",{className:"progress-bar progress-bar-success",role:"progressbar",style:{width:"".concat(S,"%")},"aria-valuenow":"0","aria-valuemin":"0","aria-valuemax":"100"}))),U&&s.a.createElement("img",{alt:"heoooo",style:{width:126,height:120},src:U}),s.a.createElement(O.a,{accept:"image/*",name:"avatar",randomizeFilename:!0,storageRef:x.a.storage().ref("images"),onUploadStart:function(){v(!0),k(0)},onUploadError:function(e){v(!1),console.error(e)},onUploadSuccess:function(e){D(e),k(100),v(!1),x.a.storage().ref("images").child(e).getDownloadURL().then(function(e){T(e),ce(e),P(e)})},onProgress:function(e){return k(e)}})),s.a.createElement("br",null),s.a.createElement("label",{className:"label_login mt-4"},"select article category"),s.a.createElement("br",null),s.a.createElement("select",{onChange:function(e){return ue(e.target.value)}},s.a.createElement("option",{value:"Short Stories"},"Short Stories"),s.a.createElement("option",{value:"Poems"},"Poems"),s.a.createElement("option",{value:"Series"},"Series"))," ",s.a.createElement("br",null),s.a.createElement("label",{className:"label_login mt-4"},"If it is the continuation of a series, enter article id. Can't remember? find it ",s.a.createElement("span",{onClick:function(){return r("schedule")},className:"btn btn-success btn-sm"},"Here")," "),s.a.createElement("br",null),s.a.createElement("input",{onChange:function(e){return W(e.target.value)},type:"text",placeholder:"Enter article id",className:"input-box"}),s.a.createElement("br",null),s.a.createElement("label",{className:"label_login mt-4"},"If it is a series, what episode ?"),s.a.createElement("br",null),s.a.createElement("input",{onChange:function(e){return ne(e.target.value)},type:"number",placeholder:"Enter Episode",className:"input-box"}),s.a.createElement("br",null),Q?s.a.createElement("div",null,s.a.createElement("h6",{style:{fontWeight:"bold",marginTop:20}},"Enter content here or simply copy and paste"),s.a.createElement(y.a,{ref:o,config:{readonly:!1},onChange:function(e){return t=e},tabIndex:1,onBlur:function(e){p(t)}})):s.a.createElement("div",null,"  ",s.a.createElement("span",{onClick:function(){return X(!0)},className:"btn mt-3 btn-success"},"Click here to post content")," "),s.a.createElement("br",null),s.a.createElement("label",{className:"label_login mt-4"},"(Optional) Enter a pretext (This is a short text that would draw the attention of your readers)"),s.a.createElement("br",null),s.a.createElement("input",{onChange:function(e){return q(e.target.value)},type:"text",placeholder:"Enter pretext",className:"input-box"})),s.a.createElement("button",{className:"btn btn-success form-control mt-4",onClick:function(){!function(){pe.apply(this,arguments)}()}},"Submit"))};n.d(t,"default",function(){return k});var k=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(c.a)(t).call(this,e))).state={page:1},n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{style:{paddingTop:80}},1==this.state.page?s.a.createElement("div",{className:"row",onClick:function(){return e.props.close()}},s.a.createElement("div",{className:"col-md-6 mb-4"},s.a.createElement("div",{style:{backgroundColor:"white",display:"flex",justifyContent:"center",flexDirection:"column",borderRadius:4.7,border:"1px solid rgba(0,0,0,0.1)",padding:20},className:"create col-md-8"},s.a.createElement("div",{style:{textAlign:"center"}},s.a.createElement(u.a,{style:{width:40,height:40,color:"rgba(0,0,0,0.3)"},icon:d.m}),s.a.createElement("h1",null,this.props.user.noOfPost),s.a.createElement("p",null,"posts")),s.a.createElement("div",{onClick:function(){e.setState({page:2})},className:"btn btn-success btn-md"},"Create a new post"))),s.a.createElement("div",{className:"col-md-6"},s.a.createElement("div",{style:{backgroundColor:"white",display:"flex",justifyContent:"center",flexDirection:"column",borderRadius:4.7,border:"1px solid rgba(0,0,0,0.1)",padding:0},className:"create col-md-10"},s.a.createElement("div",{className:"bg-success",style:{textAlign:"center",paddingTop:20}},s.a.createElement(u.a,{style:{width:60,height:60,color:"white"},icon:d.r}),s.a.createElement("div",null,s.a.createElement("b",{className:"text-light"},this.props.user.username))),s.a.createElement("div",{style:{padding:20}},s.a.createElement("div",null,this.props.user.name),s.a.createElement("hr",null),s.a.createElement("div",null," ",this.props.user.email),s.a.createElement("hr",null),s.a.createElement("div",null,this.props.user.phone)),s.a.createElement("div",{style:{padding:30,width:"100%"}},s.a.createElement("div",{style:{width:"100%"},onClick:function(){return e.props.change("schedule")},className:"btn  btn-success btn-md"},"View your posts"))))):s.a.createElement(S,{reload:function(){return e.props.reload()},change:this.props.change,user:this.props.user,back:function(){return e.setState({page:1})}})))}}]),t}(i.Component)}}]);
//# sourceMappingURL=5.d8e04bd8.chunk.js.map